{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,0BAIcC,EAAU,iBACVC,EAAU,+BAAqCC,OAF/C,iDAE+C,gB,SA2B9CC,I,OAAAA,EAAfC,EAAAN,EAAA,CAAAM,EAAAC,GAAAC,MAAA,SAAAC,EAA+BC,G,IAKrBC,EAWFC,EAqBGC,EACEC,EA8CAC,EAgCAC,EAIAC,EAMAC,EAGAC,E,kEA3FTL,EAAA,W,IAKSM,GAAS,EAATC,GAAS,EAATC,OAASC,E,IAAd,QAAKC,EAAAC,EAAad,EAASe,UAASC,OAAAC,cAA/BR,GAAAI,EAAAC,EAASI,QAAAC,MAATV,GAAS,EAAwB,CAAjC,IAAIW,EAAJP,EAASQ,MACVC,QAAQC,IAAIH,GAEG,IAAXA,EAAM,KACNlB,GAAe,IAAsBT,OAAlB2B,EAAMI,KAAK,OAAO,MACrCF,QAAQC,IAAIrB,G,WALfQ,GAAS,EAATC,EAASc,C,aAAThB,GAAS,MAATK,EAASY,QAATZ,EAASY,Q,YAAThB,E,MAAAC,C,EAUL,OAAOT,C,EA+BXE,EAAA,SAAsBuB,GAClB,IAAIC,EAAQ,EACRC,EAAUC,SAASC,iBAAiB,aACvCT,QAAQC,IAAI,QAGb,IAAK,IAAIS,EAAQ,EAAGA,EAAQH,EAAQI,OAAQD,IAAS,CACjD,IAAME,EAAQL,EAAQG,GACtB1B,EAAgB4B,GAEZA,EAAMC,UAAUC,SAAS,kBACrB7B,EAAU2B,KACV7B,EAAa6B,GACbN,KAGJM,EAAMC,UAAUC,SAAS,gBACrB5B,EAAQ0B,KACR7B,EAAa6B,GACbN,KAII,KAAhBM,EAAMb,QACThB,EAAa6B,GACbN,I,CAIG,OAAOA,C,EAGXvB,EAAA,SAAsB6B,GAClBA,EAAMC,UAAUE,IAAI,UACpBH,EAAMC,UAAUE,IAAI,S,EAExB/B,EAAA,SAAyB4B,GACrBA,EAAMC,UAAUG,OAAO,UACvBJ,EAAMC,UAAUG,OAAO,S,EAI3B/B,EAAA,SAAmB2B,GACf,OAAQ,gDAAgDK,KAAKL,EAAMb,M,EAEvEb,EAAA,SAAiB0B,GACb,OAAQ,uDAAuDK,KAAKL,EAAMb,M,EAjI9EtB,EAAMyC,kBAIAxC,EAAW,IAAIyC,SAAS1C,EAAM2C,gBAC3BC,OAAO,SAAUC,QAAQC,mBAClC7C,EAAS2C,OAAO,SAAUG,EAAAC,QAE1BzB,QAAQC,IAAIvB,GAMZsB,QAAQC,IAAIqB,QAAQC,mBAChB5C,EAAQG,EAAauB,SAUrB3B,EAASgD,SAAQ,SAACC,EAAGC,GACrB5B,QAAQC,IAAI0B,GACZ3B,QAAQC,IAAI2B,E,IAMF,IAAVjD,IAGGC,EAAe,sBAmBtBC,IACIgD,MAAMC,KAAK5D,EAAS,CACR6D,QAAS9D,EACT+D,WAAY,OACZC,KAAMrD,K,6CA5DIsD,MAAAC,KAAAC,U,CAzB9B/B,QAAUG,SAAS6B,cAAc,gBAC5BrC,QAAQC,IAAII,SAEbA,QAAQiC,iBAAiB,U,SAsBE7D,G,OAAhBL,EAAe8D,MAAAC,KAAAC,U","sources":["src/form-send.js"],"sourcesContent":["import { basket } from \"./cart\";\n \n\nconst TOKEN = '6279094717:AAEINNI-WB8PTYW-nQglKgNdX6lALH6T6A0';\n        const CHAT_ID = '-1001887598395';\n        const URI_API = `https://api.telegram.org/bot${TOKEN}/sendMessage`;\n\nbigForm = document.querySelector('.modal__form');\n     console.log(bigForm);\n    \n    bigForm.addEventListener('submit', modalFormSubmit);\n\n\n    \n    \n    function ban(event) {\n    if(event.keyCode == 13) {\n       event.preventDefault();\n    }\n    if(event.keyCode == 37) {\n       event.preventDefault();\n    }\n    if(event.keyCode == 38) {\n       event.preventDefault();\n    }\n    if(event.keyCode == 39) {\n       event.preventDefault();\n    }\n    if(event.keyCode == 40) {\n       event.preventDefault();\n    }\n };\nasync function modalFormSubmit(event) {\n    event.preventDefault();\n    \n    \n    \n    const formData = new FormData(event.currentTarget);\n    formData.append('object', address.formatted_address);\n    formData.append('basket', basket);\n\n    console.log(formData);\n  \n\n\n\n\n    console.log(address.formatted_address);\n    let error = formValidate(bigForm);\n    \n   \n    \n\n    if (formData) {\n            }\n\n\n\n        formData.forEach((x, y) => {\n        console.log(x);\n        console.log(y);\n        \n        \n    });\n\n\n    if (error === 0) {\n      \n\n       let messageToTg = `<b>New action</b>\\n`;\n    function sendMessage(){\n       \n            \n            \n        \n        for (let entry of formData.entries()) {\n            console.log(entry);\n\n            if (entry[1] !='') {\n                messageToTg += ` ${entry.join(\" : \")}\\n`;\n                console.log(messageToTg);\n            }\n\n            \n        }\n        return messageToTg;\n    };\n\n    sendMessage();\n        axios.post(URI_API, {\n                    chat_id: CHAT_ID,\n                    parse_mode: 'html',\n                    text: messageToTg,\n            });\n    }\n\n       // let response = await fetch('sendmail.php', {\n\t\t\t// \tmethod: 'POST',\n\t\t\t// \tbody: formData\n            // });\n            \n            // if (response.ok) {\n\t\t\t// \tlet result = await response.json();\n\t\t\t// \talert(result.message);\n\t\t\t// \tform.reset();\n\t\t\t// } else {\n\t\t\t// \talert(\"Ошибка\");\n            // }\n    \n    \n   \n    \n    \n\n    // console.dir(event.currentTarget.elements.repairs.checked);\n    \n    function formValidate(bigForm) {\n        let error = 0;\n        let formReq = document.querySelectorAll('._req-big');\n         console.log('gggg');\n        \n\n        for (let index = 0; index < formReq.length; index++) {\n            const input = formReq[index];\n            formRemoveError(input);\n\n            if (input.classList.contains('_req-big-mail')) {\n                if (emailTest(input)) {\n                    formAddError(input);\n                    error++;\n                }\n            }\n            if (input.classList.contains('_req-big-tel')) {\n                if (telTest(input)) {\n                    formAddError(input);\n                    error++;\n                }\n            } \n            else {\n\t\t\t\tif (input.value === '') {\n\t\t\t\t\tformAddError(input);\n\t\t\t\t\terror++;\n\t\t\t\t}\n\t\t\t}\n        }\n        return error;\n    }\n\n    function formAddError(input) {\n        input.classList.add('_error');\n        input.classList.add('_error');\n    }\n    function formRemoveError(input) {\n        input.classList.remove('_error');\n        input.classList.remove('_error');\n    }\n\n\n    function emailTest(input) {\n        return !/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,8})+$/.test(input.value);\n    }\n    function telTest(input) {\n        return !/^(\\s*)?(\\+)?([- _():=+]?\\d[- _():=+]?){10,14}(\\s*)?$/.test(input.value);\n    }\n\n\n\n\n\n}\n\n "],"names":["$bpxeT","parcelRequire","$9405fa34ec390aef$var$CHAT_ID","$9405fa34ec390aef$var$URI_API","concat","$9405fa34ec390aef$var$_modalFormSubmit","$parcel$interopDefault","$2TvXO","mark","_callee","event","formData","error1","messageToTg","sendMessage","formValidate","formAddError","formRemoveError","emailTest","telTest","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","entries","Symbol","iterator","next","done","entry","value","console","log","join","err","return","bigForm","error","formReq","document","querySelectorAll","index","length","input","classList","contains","add","remove","test","preventDefault","FormData","currentTarget","append","address","formatted_address","$b89bF","basket","forEach","x","y","axios","post","chat_id","parse_mode","text","apply","this","arguments","querySelector","addEventListener"],"version":3,"file":"cart.2f0907e7.js.map"}