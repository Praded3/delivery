{"mappings":"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","sources":["src/cart.js","src/common.js","src/helpers/createBasket.js","src/form-send.js"],"sourcesContent":["import { common } from \"./common\";\nimport { createBasket } from \"./helpers/createBasket\";\n\nconst list = document.querySelector('.orders__list');\nconst basket = JSON.parse(localStorage.getItem(common.KEY_BASKET)) ?? [];\n\ncreateBasket(basket, list);\n\nconst quantityInputs = document.querySelectorAll('.orders__quantity');\nlet total = document.querySelector('.sum');\nconst price = document.querySelectorAll('.orders__price-value');\nconst closeBtns = document.querySelectorAll('.orders__btn');\nlet totalSum = 0;\n\ncloseBtns.forEach(function (btn) {\n    btn.addEventListener(\"blur\", (input) => {\n    if (input.currentTarget.value <=0) {\n        input.currentTarget.value = 1;\n\n        };\n        console.log(input.currentTarget);\n         console.log(input.currentTarget.nextElementSibling.innerHTML = `<h3 class='orders__total'>Total: ${event.currentTarget.value * input.currentTarget.previousSibling.previousSibling.children[0].innerText}</h3> `);\n        \n        \n\n    });\n});\n\n\nquantityInputs.forEach(function (input) {\n    input.addEventListener(\"blur\", (input) => {\n    if (input.currentTarget.value <=0) {\n        input.currentTarget.value = 1;\n\n        };\n        console.log(input.currentTarget);\n         console.log(input.currentTarget.nextElementSibling.innerHTML = `<h3 class='orders__total'>Total: ${event.currentTarget.value * input.currentTarget.previousSibling.previousSibling.children[0].innerText}</h3> `);\n        \n        \n\n    });\n});\n\nquantityInputs.forEach(function (input) {\n    input.addEventListener('input', (onQuantityInputsChange));\n    // console.log(input);\n  \n});\n    \nfunction onQuantityInputsChange(input) {\n\n    const totalItemPrice = event.currentTarget.value * input.currentTarget.previousSibling.previousSibling.children[0].innerText;\n    this.nextElementSibling.innerHTML = `<h3 class='orders__total'>Total: ${totalItemPrice}</h3> `;\n    totalSum += totalItemPrice;\n    total.innerHTML =  `<h3 class='sum'>Total order: ${totalSum}</h3> `;\n\n}\n\nlet startTotal = 0;\nbasket.forEach(function  ({ price, value })  {\n    startTotal += price;\n  \n    total.innerHTML =  `<h3 class='sum'>Total order: ${startTotal}</h3> `;\n});\n \n console.log(basket);\n\nexport { basket }","const common = {\n    KEY_BASKET: 'basket',\n};\n\nexport { common };","function createBasket(arr, list) {\n    const basket = arr.map(\n        ({ id, name, price, img, value }) => \n        // ` <li class='product__item _list' data-id=\"${id}\">\n        //     <img src=\"${img}\" alt=\"${name}\" width=\"300\">\n        //     <h2 class='product__title'>${name}</h2>\n        //     <h3 class='product__price-title'>Price: <span class='product__price-value'>${price}</span></h3>\n        //     <button type='button' class='product__btn'>add to cart</button>\n        //   </li>`\n            `<li class='orders__item _list data-id=\"${id}'>\n                <img src=\"${img}\" alt=\"${name}\" width=\"50%\">\n                <div class=\"orders__item-container \">\n                  <h2 class='product__title'>${name}</h2>\n                  <h3 class='orders__price-title'>Price:  <span class='orders__price-value'>${price}</span></h3>\n                  <input class=\"orders__quantity\" type=\"number\" min=\"1\" max=\"100\" step=\"1\" name=\"quantity\" value=\"${value}\">\n                  <h3 class='orders__total'>Total: ${price * value}</h3>\n\n                </div>\n              </li>`\n    ).join('');\n  // console.log(basket);\n    list.innerHTML = basket;\n}\n\n\nexport { createBasket }","import { basket } from \"./cart\";\n \n\nconst TOKEN = '6279094717:AAEINNI-WB8PTYW-nQglKgNdX6lALH6T6A0';\n        const CHAT_ID = '-1001887598395';\n        const URI_API = `https://api.telegram.org/bot${TOKEN}/sendMessage`;\n\nbigForm = document.querySelector('.modal__form');\n     console.log(bigForm);\n    \n    bigForm.addEventListener('submit', modalFormSubmit);\n\n\n    \n    \n    function ban(event) {\n    if(event.keyCode == 13) {\n       event.preventDefault();\n    }\n    if(event.keyCode == 37) {\n       event.preventDefault();\n    }\n    if(event.keyCode == 38) {\n       event.preventDefault();\n    }\n    if(event.keyCode == 39) {\n       event.preventDefault();\n    }\n    if(event.keyCode == 40) {\n       event.preventDefault();\n    }\n };\nasync function modalFormSubmit(event) {\n    event.preventDefault();\n    \n    \n    \n    const formData = new FormData(event.currentTarget);\n    formData.append('object', address.formatted_address);\n    formData.append('basket', basket);\n\n    console.log(formData);\n  \n\n\n\n\n    console.log(address.formatted_address);\n    let error = formValidate(bigForm);\n    \n   \n    \n\n    if (formData) {\n            }\n\n\n\n        formData.forEach((x, y) => {\n        console.log(x);\n        console.log(y);\n        \n        \n    });\n\n\n    if (error === 0) {\n      \n\n       let messageToTg = `<b>New action</b>\\n`;\n    function sendMessage(){\n       \n            \n            \n        \n        for (let entry of formData.entries()) {\n            console.log(entry);\n\n            if (entry[1] !='') {\n                messageToTg += ` ${entry.join(\" : \")}\\n`;\n                console.log(messageToTg);\n            }\n\n            \n        }\n        return messageToTg;\n    };\n\n    sendMessage();\n        axios.post(URI_API, {\n                    chat_id: CHAT_ID,\n                    parse_mode: 'html',\n                    text: messageToTg,\n            });\n    }\n\n       // let response = await fetch('sendmail.php', {\n\t\t\t// \tmethod: 'POST',\n\t\t\t// \tbody: formData\n            // });\n            \n            // if (response.ok) {\n\t\t\t// \tlet result = await response.json();\n\t\t\t// \talert(result.message);\n\t\t\t// \tform.reset();\n\t\t\t// } else {\n\t\t\t// \talert(\"Ошибка\");\n            // }\n    \n    \n   \n    \n    \n\n    // console.dir(event.currentTarget.elements.repairs.checked);\n    \n    function formValidate(bigForm) {\n        let error = 0;\n        let formReq = document.querySelectorAll('._req-big');\n         console.log('gggg');\n        \n\n        for (let index = 0; index < formReq.length; index++) {\n            const input = formReq[index];\n            formRemoveError(input);\n\n            if (input.classList.contains('_req-big-mail')) {\n                if (emailTest(input)) {\n                    formAddError(input);\n                    error++;\n                }\n            }\n            if (input.classList.contains('_req-big-tel')) {\n                if (telTest(input)) {\n                    formAddError(input);\n                    error++;\n                }\n            } \n            else {\n\t\t\t\tif (input.value === '') {\n\t\t\t\t\tformAddError(input);\n\t\t\t\t\terror++;\n\t\t\t\t}\n\t\t\t}\n        }\n        return error;\n    }\n\n    function formAddError(input) {\n        input.classList.add('_error');\n        input.classList.add('_error');\n    }\n    function formRemoveError(input) {\n        input.classList.remove('_error');\n        input.classList.remove('_error');\n    }\n\n\n    function emailTest(input) {\n        return !/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,8})+$/.test(input.value);\n    }\n    function telTest(input) {\n        return !/^(\\s*)?(\\+)?([- _():=+]?\\d[- _():=+]?){10,14}(\\s*)?$/.test(input.value);\n    }\n\n\n\n\n\n}\n\n "],"names":["$eb287d4c21485783$var$list","document","querySelector","$eb287d4c21485783$var$ref","$eb287d4c21485783$export$cca069a006ab49d4","JSON","parse","localStorage","getItem","arr","list","basket","map","id","name","price","img","value","join","innerHTML","$eb287d4c21485783$var$quantityInputs","querySelectorAll","$eb287d4c21485783$var$total","$eb287d4c21485783$var$closeBtns","$eb287d4c21485783$var$totalSum","$eb287d4c21485783$var$onQuantityInputsChange","input","totalItemPrice","event","currentTarget","previousSibling","children","innerText","this","nextElementSibling","forEach","btn","addEventListener","console","log","input1","$eb287d4c21485783$var$startTotal","price1","bigForm","async","preventDefault","formData","FormData","append","address","formatted_address","error1","error","formReq","index","length","formRemoveError","classList","contains","emailTest","formAddError","telTest","formValidate","x","y","messageToTg","entry","entries","sendMessage","axios","post","chat_id","parse_mode","text","add","remove","test"],"version":3,"file":"cart.108e4a86.js.map"}